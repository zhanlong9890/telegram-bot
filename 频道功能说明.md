# 频道功能说明

## 📺 频道支持的功能

### ✅ 频道管理员可用功能

#### 基础管理
- **`/del`** - 删除消息（回复消息）
- **`/pin`** - 置顶消息（回复消息）
- **`/unpin`** - 取消所有置顶消息

#### 信息查看
- **`/id`** - 获取频道ID
- **`/groupinfo`** - 查看频道信息
- **`/admins`** - 查看管理员列表
- **`/stats`** - 查看频道统计
- **`/info`** - 查看用户信息（如果有评论功能）

## ❌ 频道不支持的功能

以下功能在频道中**已被禁用**，使用时会显示友好提示：

### 群组管理功能
- ❌ `/ban` - 踢出用户（频道没有成员概念）
- ❌ `/unban` - 解封用户（不适用）
- ❌ `/mute` - 禁言用户（频道是单向的）
- ❌ `/unmute` - 解除禁言（不适用）
- ❌ `/warn` - 警告用户（不适用）
- ❌ `/unwarn` - 清除警告（不适用）
- ❌ `/warns` - 查看警告次数（不适用）

### 积分系统
- ❌ `/points` - 查看积分
- ❌ `/top` - 积分排行榜
- ❌ `/addpoints` - 添加积分
- ❌ `/removepoints` - 扣除积分
- ❌ `/setpoints` - 设置积分

### 群组设置
- ❌ `/setwelcome` - 设置欢迎消息
- ❌ `/getwelcome` - 查看欢迎消息
- ❌ `/setrules` - 设置群规
- ❌ `/toggleads` - 开关自动删除广告
- ❌ `/togglewelcome` - 开关欢迎消息
- ❌ `/settings` - 查看群组设置

### 自动功能
- ❌ 自动删除广告（频道不执行）
- ❌ 自动欢迎新成员（频道不执行）
- ❌ 防刷屏（频道不执行）
- ❌ 检测重复消息（频道不执行）

## 💡 实现方式

### 1. 装饰器限制
使用 `@require_group` 装饰器的命令会自动在频道中禁用：
```python
@require_group  # 仅群组可用
async def ban_user(...):
    ...
```

### 2. 手动检查
在函数内部检查频道类型：
```python
if chat.type == 'channel':
    await message.reply_text("❌ 频道不支持此功能！")
    return
```

### 3. 帮助信息区分
`/start` 和 `/help` 命令会根据聊天类型显示不同的帮助信息：
- 频道：只显示频道支持的功能
- 群组：显示所有功能

## 📋 功能对比

| 功能类别 | 群组 | 频道 | 说明 |
|---------|------|------|------|
| 删除消息 | ✅ | ✅ | 通用功能 |
| 置顶消息 | ✅ | ✅ | 通用功能 |
| 踢出用户 | ✅ | ❌ | 频道不支持 |
| 禁言用户 | ✅ | ❌ | 频道不支持 |
| 警告系统 | ✅ | ❌ | 频道不支持 |
| 积分系统 | ✅ | ❌ | 频道不支持 |
| 自动管理 | ✅ | ❌ | 频道不支持 |
| 群组设置 | ✅ | ❌ | 频道不支持 |
| 查看统计 | ✅ | ✅ | 简化版 |
| 查看管理员 | ✅ | ✅ | 通用功能 |

## 🎯 使用建议

### 频道使用场景
1. **新闻发布频道**：使用 `/pin` 置顶重要公告
2. **内容分享频道**：使用 `/del` 删除不当内容
3. **统计监控**：使用 `/stats` 查看订阅者数量

### 群组使用场景
1. **社区管理**：使用所有管理功能
2. **活跃激励**：使用积分系统
3. **自动管理**：使用自动删除广告等功能

## ⚠️ 注意事项

1. **自动禁用**：所有群组专用功能在频道中会自动禁用
2. **友好提示**：使用不支持的功能会显示明确的提示信息
3. **帮助区分**：帮助信息会根据聊天类型自动调整
4. **权限检查**：频道管理员权限由 Telegram 管理

## 🔧 技术实现

- **装饰器**：`@require_group` 自动限制仅群组可用
- **类型检查**：函数内部检查 `chat.type == 'channel'`
- **帮助信息**：根据 `chat.type` 动态生成帮助内容
- **错误提示**：统一的错误提示格式

## 📚 相关文件

- `channel_management.py` - 频道管理模块
- `utils_common.py` - 公共工具（支持频道）
- `admin_commands.py` - 管理命令（已限制频道）
- `bot.py` - 主程序（已区分频道和群组）

